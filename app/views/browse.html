{% from "govuk/components/breadcrumbs/macro.njk" import govukBreadcrumbs %}
{% from "govuk/components/fieldset/macro.njk" import govukFieldset %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/select/macro.njk" import govukSelect %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/date-input/macro.njk" import govukDateInput %}
{% from "govuk/components/hint/macro.njk" import govukHint %}
{% from "govuk/components/error-message/macro.njk" import govukErrorMessage %}
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% from "govuk/components/accordion/macro.njk" import govukAccordion %}
{% from "govuk/components/pagination/macro.njk" import govukPagination %}
{% from "govuk/components/tag/macro.njk" import govukTag %}


{% extends "layouts/main.html" %}


{% set title = "All datasets" %}
{% block pageTitle %}{{title}} - {{ serviceName }}
{% endblock %}

{# START: breadcrumbs #}
{% block breadcrumbs %}
    {{ govukBreadcrumbs({
    items: [
        {
        text: "Home",
        href: "/"
        },
        {
        text: "All datasets",
        href: "/browse"
        },
        {
        text: datasetDetails.title
        }
    ]
    }) }}
{% endblock %}
{# END: breadcrumbs #}

{% set topicHeadingHtml  %}
    <span class="filter-expander-icon">
    </span>
    <div class="ftd-margin-left-40 govuk-!-font-weight-regular">
        Topic
    </div> 
    <p class="govuk-body-s filter-selected govuk-!-margin-bottom-0">1 selected</p>
   
{% endset%}

{% set topicCheckbox %}

    {% set topics = [{id:"1", value:"topic1",text:"Accidents and incidents",label:{classes:"ftd-margin-bottom-12"} },{id:"2", value:"topic2",text:"Air quality and the environment",label:{classes:"ftd-margin-bottom-12"} } ] %}
    <div class="app-c-option-select__filter govuk-!-margin-bottom-6">   
        {{ govukInput({
            label: {
                text: "Filter topics",
                class: "govuk-visually-hidden"
            },
            id: "topic-filter",
            classes:"filter-input hidden",
            type:"search"
            }) 
        }} 
    </div>
    {{ govukCheckboxes({
        name: "selectedTopics",
        classes:"filter-checkboxes",
        items: topics,
        values: selectedTopics
        }) 
    }}
    <div class="govuk-form-group govuk-!-margin-top-5">
        {{
            govukButton({
                text:"Apply topic filter",
                type:"submit"
            })
        }}
    </div>
{% endset%}

{% set transportModeHeadingHtml  %}
    <span class="filter-expander-icon">
    </span>
        <div class="ftd-margin-left-40 govuk-!-font-weight-regular">
        Transport mode
    </div>
{% endset%}

{% set transportModeCheckbox %}
    {% set transportModes = [{id:"1",value:"Bicycles", text:"Bicycles" },{id:"2",value:"Buses", text:"Buses" } ] %}
    <div class="app-c-option-select__filter govuk-!-margin-bottom-6">   
        {{ govukInput({
            label: {
                text: " Filter transport modes",
                classes: "govuk-visually-hidden"
            },
            id: "transport-mode-filter",
            classes:"filter-input",
            type:"search"
            }) 
        }} 
    </div>
    {{ govukCheckboxes({
        name: "selectedTransportModes",
        classes:"filter-checkboxes",
        items: transportModes,
        values: selectedTransportModes
        }) 
    }}
    <div class="govuk-form-group govuk-!-margin-top-5">
        {{
            govukButton({
                text:"Apply transport mode filter",
                type:"submit"
            })
        }}
    </div>
{% endset%}

{% set roadNetworkHeadingHtml  %}
    <span class="filter-expander-icon">
    </span>
        <div class="ftd-margin-left-40 govuk-!-font-weight-regular">
        Road network
    </div>                   
{% endset%}

{% set roadNetworkCheckbox %}

    {% set roadNetworks = [{id:"1", value:"Aroads", text:"A roads"}, {id:"1", value:"Broads", text:"B roads"}] %}
    <div class="app-c-option-select__filter govuk-!-margin-bottom-6">   
        {{ govukInput({
            label: {
                text: " Filter road network",
                classes: "govuk-visually-hidden"
            },
            id: "road-network-filter",
            classes:"filter-input",
            type:"search"
            }) 
        }} 
    </div>
    {{ govukCheckboxes({
        name: "selectedRoadNetworks",
        classes:"filter-checkboxes",
        items: roadNetworks,
        values: selectedRoadNetworks
        }) 
    }}
    <div class="govuk-form-group govuk-!-margin-top-5">
        {{
            govukButton({
                text:"Apply road network filter",
                type: "submit"
            })
        }}
    </div>
{% endset%}

{% set loacationHeadingHtml  %}
    <span class="filter-expander-icon">
    </span>
        <div class="ftd-margin-left-40 govuk-!-font-weight-regular">
        Location
    </div>                   
{% endset%}

{% set locationCheckbox %}

    {% set locations = [{id:"1", value:"East_Midlands_England", text:"East Midlands England"}, {id:"2", value:"East_of_England", text:"East of England"}] %}
    <div class="app-c-option-select__filter govuk-!-margin-bottom-6">   
        {{ govukInput({
            label: {
                text: " Filter locations",
                classes: "govuk-visually-hidden"
            },
            id: "location-filter",
            classes:"filter-input",
            type:"search"
            }) 
        }} 
    </div>
    {{ govukCheckboxes({
        name: "selectedLocations",
        classes:"filter-checkboxes",
        items: locations,
        values: selectedLocations
        }) 
    }}
    <div class="govuk-form-group govuk-!-margin-top-5">
        {{
            govukButton({
                text:"Apply location filter",
                type:"submit"
            })
        }}
    </div>
{% endset%}

{% set geographicalRegionHeadingHtml  %}
    <span class="filter-expander-icon">
    </span>
        <div class="ftd-margin-left-40 govuk-!-font-weight-regular">
        Geographical region
    </div>                
{% endset%}

{% set geographicalRegionCheckbox %}

    {% set geographicalRegions = [{id:"1", value:"Counties_or_Combined_Authorities", text:"Counties or Combined Authorities"},{id:"2", value:"National", text:"National"} ] %}
    <div class="app-c-option-select__filter govuk-!-margin-bottom-6">   
        {{ govukInput({
            label: {
                text: " Filter regions",
                classes: "govuk-visually-hidden"
            },
            id: "region-filter",
            classes:"filter-input",
            type:"search"
            }) 
        }} 
    </div>
    {{ govukCheckboxes({
        name: "selectedRegions",
        classes:"filter-checkboxes",
        items: geographicalRegions,
        values: selectedRegions
        }) 
    }}
    <div class="govuk-form-group govuk-!-margin-top-5">
        {{
            govukButton({
                text:"Apply region filter",
                type:"submit"
            })
        }}
    </div>
{% endset%}

{% set timePeriodHeadingHtml  %}
    <span class="filter-expander-icon">
    </span>
        <div class="ftd-margin-left-40 govuk-!-font-weight-regular">
        Time period
    </div>                 
{% endset%}

{% set timePeriodSelection %}
    <div class="govuk-form-group">
        <label class="govuk-label" for="time-period-start-filter">
            Data coverage start
        </label>
        <div id="event-name-hint" class="govuk-hint">
            For example 05/11/2011
        </div>
        <input id="startdate" class="govuk-input" type="date" name="startDate" value={{startDate}}>
    </div>
    <div class="govuk-form-group">
        <label class="govuk-label" for="time-period-start-filter">
            Data coverage end
        </label>
        <div id="event-name-hint" class="govuk-hint">
            For example 05/12/2011
        </div>
        <input id="enddate" class="govuk-input" type="date" name="endDate" value={{endDate}}>
    </div>
    <div class="govuk-form-group">
        {{
            govukButton({
                text:"Apply time period filter", 
                type:"submit"
            })
        }}
    </div>

{% endset%}

{% set updateFrequencyHeadingHtml  %}
    <span class="filter-expander-icon">
    </span>
        <div class="ftd-margin-left-40 govuk-!-font-weight-regular">
        Update frequency
    </div>               
{% endset%}

{% set updateFrequencyRegionCheckbox %}

    {% set updateFrequencies = [{id:"1",value:"Live",text:"Live"},{id:"2",value:"Daily",text:"Daily"} ] %}
    <div class="app-c-option-select__filter govuk-!-margin-bottom-6">   
        {{ govukInput({
            label: {
                text: " Filter Update Frequency",
                classes: "govuk-visually-hidden "
            },
            id: "frequency-filter",
            classes:"filter-input",
            type:"search"
            }) 
        }} 
    </div>
    {{ govukCheckboxes({
        name: "selectedUpdateFrequencies",
        classes:"filter-checkboxes ",
        items: updateFrequencies,
        values: selectedUpdateFrequencies
        }) 
    }}
    <div class="govuk-form-group govuk-!-margin-top-5">
        {{
            govukButton({
                text:"Apply update frequency filter",
                type:"submit"
            })
        }}
    </div>
{% endset%}

{% set organisationHeadingHtml  %}
    <span class="filter-expander-icon">
    </span>
        <div class="ftd-margin-left-40 govuk-!-font-weight-regular">
        Organisation
    </div>                 
{% endset%}

{% set organisationCheckbox %}

    {% set organisations = [{id:"1", value:"Basemap", text:"Basemap"}, {id:"2", value:"Blackpool_Council", text:"Blackpool Council"}] %}
    <div class="app-c-option-select__filter govuk-!-margin-bottom-6">   
        {{ govukInput({
            label: {
                text: " Filter Organisation",
                classes: "govuk-visually-hidden"
            },
            id: "oranisation-filter",
            classes:"filter-input",
            type:"search"
            }) 
        }} 
    </div>
    {{ govukCheckboxes({
        name: "selectedOrganisations",
        classes:"filter-checkboxes",
        items: organisations,
        values: selectedOrganisations
        }) 
    }}
    <div class="govuk-form-group govuk-!-margin-top-5">
        {{
            govukButton({
                text:"Filter Organisation",
                type:"submit"
            })
        }}
    </div>
{% endset%}


{% block content %}
<form
action="/browse" 
      method="get"
      role="search"
      id="search-form" 
>
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-xl govuk-!-margin-bottom-3">
         {{ title }}
    </h1>
    {% set button %}
    <div class="ftd-search_button_wrapper ">
    {{ govukButton({
        type:"submit",
        classes:"govuk-!-margin-bottom-0 ftd-box_shadow_none",
        html: searchIcon
    }) }}
    </div>
    {% endset %}

    {{ govukInput({
        suffix: {
            html:button,
            classes:"govuk-!-padding-0 ftd-border_none"
        },
            id: "search",
            name:"q",
            value: paramValues.q ,
            classes:"govuk-input govuk-input--width-20 nap-search-text govuk-!-margin-bottom-0",
            type:"search",
            attributes: {
                placeholder:"Search for datasets",
                'aria-label':"Search for datasets",
                autofocus:true,
                autocomplete:"off"
            }
    }) }} 
  </div>
</div>
<div class="govuk-grid-row">
  <div class="govuk-grid-column-one-third">
    <div class="search-filter">
        <h2 class="govuk-heading-m">Filter by</h2>
        <div class="govuk-form-group">

         {{ govukAccordion({
            id: "accordion-default",
            items: [
                {
                heading: {
                    html: topicHeadingHtml
                },
                content: {
                    html: topicCheckbox
                }
                },
                {
                heading: {
                    html: transportModeHeadingHtml
                },
                content: {
                    html: transportModeCheckbox
                }
                },
                {
                heading: {
                    html: roadNetworkHeadingHtml
                },
                content: {
                    html: roadNetworkCheckbox
                }
                },
                {
                heading: {
                    html: loacationHeadingHtml
                },
                content: {
                    html: locationCheckbox
                }
                },
                {
                heading: {
                    html: geographicalRegionHeadingHtml
                },
                content: {
                    html: geographicalRegionCheckbox
                }
                },
                {
                heading: {
                    html: timePeriodHeadingHtml
                },
                content: {
                    html: timePeriodSelection
                }
                },
                {
                heading: {
                    html: updateFrequencyHeadingHtml
                },
                content: {
                    html: updateFrequencyRegionCheckbox
                }
                },
                {
                heading: {
                    html: organisationHeadingHtml
                },
                content: {
                    html: organisationCheckbox
                }
                }
            ]
            })
        }}  
        </div>
            <a href="" id="remove_filters_link" class="govuk-link">Remove filters</a>
       
    </div>
</div>
<div class="govuk-grid-column-two-thirds">
        <p id="filtered_result" class="govuk-body govuk-!-font-weight-bold" aria-atomic="true">
             100 result 
        </p>

        {% set sortFieldItems = [{value:"Most_Recent", text:"Most Recent"},{value:"Relevance", text:"Relevance"}] %}

    {{ govukSelect({
        id: "sort-input",
        name: "sort",
        classes:"ftd-min-w-10",
        label: {
            text: "Sort by",
            classes:"govuk-!-margin-right-3 ftd-inline"
        },
        items: sortFieldItems
    }) }}
  

    {% for i in range(20) %}
    <h3 class="govuk-heading-m govuk-!-margin-bottom-2">
    <a href="/dataset/id1" class="govuk-link govuk-link--no-visited-state">New Dataset</a>
</h3>

{{ govukSummaryList({
    classes: 'govuk-summary-list--no-border',
  rows: [
    {
      key: {
        classes: "",
        text: "Availability:"
      },
      value: {
        classes: "",
        text: "	Not released"
      }
    },
    {
      key: {
        classes: "govuk-!-padding-0",
        text: "Locations:"
      },
      value: {
        classes: "govuk-!-padding-0",
        html: govukTag({
  text: "completed"
}) 
      }
    },
    {
      key: {
        classes: "govuk-!-padding-0",
        text: "Regions:"
      },
      value: {
        classes: "govuk-!-padding-0",
        html: govukTag({
  text: "LOCAL AUTHORITY DISTRICTS "
}) 
      }
    },
    {
      key: {
        classes: "govuk-!-padding-0",
        text: "Update frequency:"
      },
      value: {
        classes: "govuk-!-padding-0",
        text: 'Live'
      }
    },
    {
      key: {
        classes: "govuk-!-padding-0",
        text: "Organisation:"
      },
      value: {
        classes: "govuk-!-padding-0",
        html: "Basemap"
      }
    }
  ]
}) }}


{{ govukTag({
  text: "ACCIDENTS AND INCIDENTS"
}) }}

<hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

                    
{% endfor %}
    

    {% set previousPage = currentPage | int -1 %}
    {% set nextPage = currentPage | int +1 %}
    {% set paginationItems = [] %}
    {% for i in [ 1, 2, 3, 'dots', 8 ] %}
        {%set paginationItems = (paginationItems.push({
            number: i,
            current: true if (i == 1) else false,
            href: "javascript:pageNavigation("+i+","+numberOfPages+")"
        } if i != 'dots' else {ellipsis: true}),paginationItems)%}
    {% endfor %}

  {{ govukPagination({
      previous: {
       href: "javascript:pageNavigation(" + previousPage + "," + numberOfPages + ")" if ((currentPage) > 1) else null
    },
     next: {
        href: "#"
    },
     items:paginationItems
    }) }}
  </div>

  </div>
</form>

{% endblock %}